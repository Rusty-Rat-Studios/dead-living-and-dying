[gd_scene load_steps=20 format=3 uid="uid://dx3xbk4c7uji8"]

[ext_resource type="Script" path="res://game.gd" id="1_77rk7"]
[ext_resource type="PackedScene" uid="uid://mt6b5vxmupgn" path="res://player/player.tscn" id="1_hu241"]
[ext_resource type="Script" path="res://base_classes/state_machine.gd" id="3_fg5sk"]
[ext_resource type="Script" path="res://player/state_dead.gd" id="6_bheuf"]
[ext_resource type="Script" path="res://player/state_living.gd" id="7_unc66"]
[ext_resource type="Script" path="res://player/state_dying.gd" id="8_isvo6"]
[ext_resource type="PackedScene" uid="uid://yihpxsaeuqdi" path="res://ghost/ghost.tscn" id="9_t4a6d"]
[ext_resource type="PackedScene" uid="uid://b3nn5u3a5o85j" path="res://map/floor.tscn" id="10_44xgk"]
[ext_resource type="Script" path="res://map/room.gd" id="10_uwref"]
[ext_resource type="PackedScene" uid="uid://web8bdry114l" path="res://map/shrine.tscn" id="11_6msjq"]
[ext_resource type="PackedScene" uid="uid://cexvn2mosncly" path="res://map/basic_room/wall_with_door.tscn" id="11_odxui"]
[ext_resource type="PackedScene" uid="uid://bson3umirpot2" path="res://map/basic_room/wall_without_door.tscn" id="12_5tnol"]
[ext_resource type="PackedScene" uid="uid://bwfxerrhc458i" path="res://items/key_item.tscn" id="12_tee81"]
[ext_resource type="PackedScene" uid="uid://c75eretp0162f" path="res://items/item.tscn" id="13_7hjh7"]
[ext_resource type="PackedScene" uid="uid://bcep1wbs2caas" path="res://possessable/possessable.tscn" id="13_66ase"]
[ext_resource type="PackedScene" uid="uid://dic5onsop66y4" path="res://ui/game_menu.tscn" id="13_owhbc"]
[ext_resource type="PackedScene" uid="uid://c1hur2s8mgagv" path="res://possessable/attack/throwable.tscn" id="14_23qy6"]
[ext_resource type="PackedScene" uid="uid://bfmkrask6gxl3" path="res://possessable/attack/ranged.tscn" id="15_lv48w"]
[ext_resource type="PackedScene" uid="uid://bwmbngtw81o3y" path="res://ui/debug_console.tscn" id="15_rbtf5"]

[node name="Game" type="Node3D"]
script = ExtResource("1_77rk7")

[node name="Player" parent="." instance=ExtResource("1_hu241")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.830566, 0.486173, -0.271654, -0.492404, -0.413176, 0.766044, 0.260189, 0.770014, 0.582563, 0, 10, 0)
visible = false
light_color = Color(0.294118, 0.294118, 0.356863, 1)

[node name="DebugLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.830566, 0.486173, -0.271654, -0.492404, -0.413176, 0.766044, 0.260189, 0.770014, 0.582563, 0, 10, 0)
visible = false
light_color = Color(0.29219, 0.29219, 0.29219, 1)

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("3_fg5sk")
starting_state = NodePath("Living")

[node name="Dead" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("6_bheuf")
state_dead = NodePath(".")
state_living = NodePath("../Living")
state_dying = NodePath("../Dying")

[node name="Living" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("7_unc66")
state_dead = NodePath("../Dead")
state_living = NodePath(".")
state_dying = NodePath("../Dying")

[node name="Dying" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("8_isvo6")
state_dead = NodePath("../Dead")
state_living = NodePath("../Living")
state_dying = NodePath(".")

[node name="WorldGrid" type="Node3D" parent="."]

[node name="RoomBottom" type="Node3D" parent="WorldGrid"]
script = ExtResource("10_uwref")

[node name="Floor" parent="WorldGrid/RoomBottom" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="WorldGrid/RoomBottom" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor" parent="WorldGrid/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor2" parent="WorldGrid/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="WorldGrid/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="Shrine" parent="WorldGrid/RoomBottom" instance=ExtResource("11_6msjq")]
default = true

[node name="Shrine2" parent="WorldGrid/RoomBottom" instance=ExtResource("11_6msjq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -6)

[node name="KeyItem" parent="WorldGrid/RoomBottom" instance=ExtResource("12_tee81")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.5, 0)

[node name="Item" parent="WorldGrid/RoomBottom" instance=ExtResource("13_7hjh7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0.5, -2)

[node name="RoomCenter" type="Node3D" parent="WorldGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)
script = ExtResource("10_uwref")

[node name="Floor" parent="WorldGrid/RoomCenter" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="WorldGrid/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithDoor2" parent="WorldGrid/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithDoor3" parent="WorldGrid/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithDoor4" parent="WorldGrid/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="GhostCenter" parent="WorldGrid/RoomCenter" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Ranged" parent="WorldGrid/RoomCenter" instance=ExtResource("15_lv48w")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 5)

[node name="Possessable" parent="WorldGrid/RoomCenter" instance=ExtResource("13_66ase")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0.25, 4)

[node name="Throwable" parent="WorldGrid/RoomCenter" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0.25, 4)

[node name="Item2" parent="WorldGrid/RoomCenter" instance=ExtResource("13_7hjh7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.5, 4)

[node name="RoomLeft" type="Node3D" parent="WorldGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -20)
script = ExtResource("10_uwref")

[node name="Floor" parent="WorldGrid/RoomLeft" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="WorldGrid/RoomLeft" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="WallWithoutDoor" parent="WorldGrid/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="WorldGrid/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="WorldGrid/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="GhostLeft1" parent="WorldGrid/RoomLeft" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="GhostLeft2" parent="WorldGrid/RoomLeft" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -3)

[node name="GhostLeft3" parent="WorldGrid/RoomLeft" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 1, 0)

[node name="Possessable" parent="WorldGrid/RoomLeft" instance=ExtResource("13_66ase")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.25, 0)

[node name="Throwable" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 0)

[node name="Throwable2" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.25, -2)

[node name="Throwable3" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0.25, 2)

[node name="Throwable4" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0.25, -1)

[node name="Throwable5" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0.25, -3)

[node name="Throwable6" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.25, 2)

[node name="Throwable7" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 3)

[node name="Throwable8" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0.25, 1)

[node name="Throwable9" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.25, 1)

[node name="Throwable10" parent="WorldGrid/RoomLeft" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.25, -4)

[node name="RoomRight" type="Node3D" parent="WorldGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -20)
script = ExtResource("10_uwref")

[node name="Floor" parent="WorldGrid/RoomRight" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="WorldGrid/RoomRight" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor" parent="WorldGrid/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="WorldGrid/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="WorldGrid/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="GhostRight1" parent="WorldGrid/RoomRight" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 1, 0)

[node name="GhostRight2" parent="WorldGrid/RoomRight" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 1, 2)

[node name="GhostRight3" parent="WorldGrid/RoomRight" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 1, -4)

[node name="Throwable" parent="WorldGrid/RoomRight" instance=ExtResource("14_23qy6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, 0)

[node name="RoomTop" type="Node3D" parent="WorldGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -40)
script = ExtResource("10_uwref")

[node name="Floor" parent="WorldGrid/RoomTop" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="WorldGrid/RoomTop" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor" parent="WorldGrid/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="WorldGrid/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="WorldGrid/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="Shrine" parent="WorldGrid/RoomTop" instance=ExtResource("11_6msjq")]

[node name="UI" type="CanvasLayer" parent="."]

[node name="MainMenu" parent="UI" instance=ExtResource("13_owhbc")]
visible = false

[node name="DebugConsole" parent="UI" instance=ExtResource("15_rbtf5")]
process_mode = 3
visible = false
