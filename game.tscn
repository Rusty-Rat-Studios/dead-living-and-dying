[gd_scene load_steps=12 format=3 uid="uid://dx3xbk4c7uji8"]

[ext_resource type="Script" path="res://game.gd" id="1_77rk7"]
[ext_resource type="PackedScene" uid="uid://mt6b5vxmupgn" path="res://player/player.tscn" id="1_hu241"]
[ext_resource type="Script" path="res://base_classes/state_machine.gd" id="5_1w8up"]
[ext_resource type="Script" path="res://player/state_dead.gd" id="6_bheuf"]
[ext_resource type="Script" path="res://player/state_living.gd" id="7_unc66"]
[ext_resource type="Script" path="res://player/state_dying.gd" id="8_isvo6"]
[ext_resource type="PackedScene" uid="uid://yihpxsaeuqdi" path="res://ghost/ghost.tscn" id="9_t4a6d"]
[ext_resource type="PackedScene" uid="uid://b3nn5u3a5o85j" path="res://map/floor.tscn" id="10_44xgk"]
[ext_resource type="Script" path="res://map/room.gd" id="10_uwref"]
[ext_resource type="PackedScene" uid="uid://cexvn2mosncly" path="res://map/wall_with_door.tscn" id="11_odxui"]
[ext_resource type="PackedScene" uid="uid://bson3umirpot2" path="res://map/wall_without_door.tscn" id="12_5tnol"]

[node name="Game" type="Node3D"]
script = ExtResource("1_77rk7")

[node name="Player" parent="." instance=ExtResource("1_hu241")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.873288, 0.0729331, 0.481714, -0.403253, -0.446664, 0.798673, 0.273414, -0.891724, -0.360656, 0, 10, 0)
visible = false
light_color = Color(0.29219, 0.29219, 0.29219, 1)
shadow_enabled = true

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("5_1w8up")
starting_state = NodePath("Living")

[node name="Dead" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("6_bheuf")
state_dead = NodePath(".")
state_living = NodePath("../Living")
state_dying = NodePath("../Dying")

[node name="Living" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("7_unc66")
state_dead = NodePath("../Dead")
state_living = NodePath(".")
state_dying = NodePath("../Dying")

[node name="Dying" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("8_isvo6")
state_dead = NodePath("../Dead")
state_living = NodePath("../Living")
state_dying = NodePath(".")

[node name="World" type="Node3D" parent="."]

[node name="RoomBottom" type="Node3D" parent="World"]

[node name="Floor" parent="World/RoomBottom" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomBottom" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor2" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="RoomCenter" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)
script = ExtResource("10_uwref")

[node name="Floor" parent="World/RoomCenter" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithDoor2" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithDoor3" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithDoor4" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="Ghost" parent="World/RoomCenter" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="RoomLeft" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -20)

[node name="Floor" parent="World/RoomLeft" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomLeft" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="WallWithoutDoor" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="RoomRight" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -20)

[node name="Floor" parent="World/RoomRight" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomRight" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="RoomTop" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -40)

[node name="Floor" parent="World/RoomTop" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomTop" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)
