[gd_scene load_steps=19 format=3 uid="uid://dx3xbk4c7uji8"]

[ext_resource type="Script" path="res://game.gd" id="1_77rk7"]
[ext_resource type="PackedScene" uid="uid://mt6b5vxmupgn" path="res://player/player.tscn" id="1_hu241"]
[ext_resource type="Script" path="res://base_classes/state_machine.gd" id="3_fg5sk"]
[ext_resource type="Script" path="res://player/state_dead.gd" id="6_bheuf"]
[ext_resource type="Script" path="res://player/state_living.gd" id="7_unc66"]
[ext_resource type="Script" path="res://player/state_dying.gd" id="8_isvo6"]
[ext_resource type="PackedScene" uid="uid://yihpxsaeuqdi" path="res://ghost/ghost.tscn" id="9_t4a6d"]
[ext_resource type="PackedScene" uid="uid://b3nn5u3a5o85j" path="res://map/floor.tscn" id="10_44xgk"]
[ext_resource type="Script" path="res://map/room.gd" id="10_uwref"]
[ext_resource type="Script" path="res://shrine.gd" id="11_hfytc"]
[ext_resource type="PackedScene" uid="uid://cexvn2mosncly" path="res://map/wall_with_door.tscn" id="11_odxui"]
[ext_resource type="PackedScene" uid="uid://bson3umirpot2" path="res://map/wall_without_door.tscn" id="12_5tnol"]
[ext_resource type="PackedScene" uid="uid://bcep1wbs2caas" path="res://possessable/possessable.tscn" id="13_66ase"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_eitr8"]
radius = 2.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_apiwq"]
transparency = 1
albedo_color = Color(0.0470588, 1, 0.0392157, 0.243137)

[sub_resource type="CylinderMesh" id="CylinderMesh_fvtqe"]
material = SubResource("StandardMaterial3D_apiwq")
top_radius = 2.0
bottom_radius = 2.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_j7r0k"]
transparency = 1
albedo_color = Color(0.909081, 0, 0.138258, 0.396078)

[sub_resource type="CylinderMesh" id="CylinderMesh_ml2oq"]
material = SubResource("StandardMaterial3D_j7r0k")
top_radius = 2.0
bottom_radius = 2.0

[node name="Game" type="Node3D"]
script = ExtResource("1_77rk7")

[node name="Player" parent="." instance=ExtResource("1_hu241")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.873288, 0.0729331, 0.481714, -0.403253, -0.446664, 0.798673, 0.273414, -0.891724, -0.360656, 0, 10, 0)
visible = false
light_color = Color(0.29219, 0.29219, 0.29219, 1)
shadow_enabled = true

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("3_fg5sk")
starting_state = NodePath("Living")

[node name="Dead" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("6_bheuf")
state_dead = NodePath(".")
state_living = NodePath("../Living")
state_dying = NodePath("../Dying")

[node name="Living" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("7_unc66")
state_dead = NodePath("../Dead")
state_living = NodePath(".")
state_dying = NodePath("../Dying")

[node name="Dying" type="Node" parent="StateMachine" node_paths=PackedStringArray("state_dead", "state_living", "state_dying")]
script = ExtResource("8_isvo6")
state_dead = NodePath("../Dead")
state_living = NodePath("../Living")
state_dying = NodePath(".")

[node name="World" type="Node3D" parent="."]

[node name="RoomBottom" type="Node3D" parent="World"]
script = ExtResource("10_uwref")

[node name="Floor" parent="World/RoomBottom" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomBottom" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor2" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="World/RoomBottom" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="Shrine" type="Area3D" parent="World/RoomBottom"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5)
collision_layer = 0
collision_mask = 8
script = ExtResource("11_hfytc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/RoomBottom/Shrine"]
shape = SubResource("CylinderShape3D_eitr8")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RoomBottom/Shrine"]
mesh = SubResource("CylinderMesh_fvtqe")

[node name="Label3D" type="Label3D" parent="World/RoomBottom/Shrine"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 1, 0)
text = "SHRINE

Come here as a
ghost to revive."
font_size = 64

[node name="Possessable" parent="World/RoomBottom" instance=ExtResource("13_66ase")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.25, 0)

[node name="RoomCenter" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)
script = ExtResource("10_uwref")

[node name="Floor" parent="World/RoomCenter" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithDoor2" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithDoor3" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithDoor4" parent="World/RoomCenter" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="Ghost" parent="World/RoomCenter" instance=ExtResource("9_t4a6d")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Hurtbox" type="Area3D" parent="World/RoomCenter"]
collision_layer = 4
collision_mask = 0
monitoring = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/RoomCenter/Hurtbox"]
shape = SubResource("CylinderShape3D_eitr8")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RoomCenter/Hurtbox"]
mesh = SubResource("CylinderMesh_ml2oq")

[node name="Label3D" type="Label3D" parent="World/RoomCenter/Hurtbox"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 1, 0)
text = "HURTBOX (Physical)

Come here to 
get hurt ;_ ;"
font_size = 64

[node name="Possessable" parent="World/RoomCenter" instance=ExtResource("13_66ase")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0.25, 0)

[node name="RoomLeft" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -20)

[node name="Floor" parent="World/RoomLeft" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomLeft" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="WallWithoutDoor" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="World/RoomLeft" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="RoomRight" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -20)

[node name="Floor" parent="World/RoomRight" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomRight" instance=ExtResource("11_odxui")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor3" parent="World/RoomRight" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)

[node name="RoomTop" type="Node3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -40)

[node name="Floor" parent="World/RoomTop" instance=ExtResource("10_44xgk")]

[node name="WallWithDoor" parent="World/RoomTop" instance=ExtResource("11_odxui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9.95)

[node name="WallWithoutDoor" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9.95)

[node name="WallWithoutDoor2" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -9.95, 0, 0)

[node name="WallWithoutDoor3" parent="World/RoomTop" instance=ExtResource("12_5tnol")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.95, 0, 0)
